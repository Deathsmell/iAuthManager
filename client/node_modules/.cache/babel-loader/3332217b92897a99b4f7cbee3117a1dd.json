{"ast":null,"code":"import _regeneratorRuntime from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{useHttp}from\"../hooks/http.hook\";import{useMessage}from\"../hooks/message.hook\";import{AuthContext}from\"../context/AuthContext\";import'./AuthPage.css';export var AuthPage=function AuthPage(){var auth=useContext(AuthContext);var _useHttp=useHttp(),loading=_useHttp.loading,error=_useHttp.error,request=_useHttp.request,clearError=_useHttp.clearError;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var message=useMessage();useEffect(function(){message(error);clearError();},[error,message,clearError]);var changeHandler=function changeHandler(event){setForm(_objectSpread({},form,_defineProperty({},event.target.name,event.target.value)));};var registerHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request('/api/signup','POST',_objectSpread({},form));case 2:data=_context.sent;message(data.message);case 4:case\"end\":return _context.stop();}}},_callee);}));return function registerHandler(){return _ref.apply(this,arguments);};}();var loginHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return request('/api/login','POST',_objectSpread({},form));case 2:data=_context2.sent;if(data){auth.login(data.token,data.id);}else{// message(\"Not response\")\n}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function loginHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"col xl12 l12 m12 s12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col xl6 offset-xl3 l8 offset-l2 m8 offset-m2 s10 offset-s1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card cyan darken-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"auth-panel card-content white-text hoverable \"},/*#__PURE__*/React.createElement(\"span\",{className:\"card-title center-align\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"auth-logo\"},\"Authentication\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(\"input\",{id:\"email\",type:\"email\",className:\"validate\",name:\"email\",onChange:changeHandler}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-field col s12\"},/*#__PURE__*/React.createElement(\"input\",{id:\"password\",type:\"password\",className:\"validate\",name:\"password\",onChange:changeHandler}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-action row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col s1\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-large  cyan darken-2 col s4\",onClick:loginHandler,disabled:loading},/*#__PURE__*/React.createElement(\"h6\",{style:{color:'black'}},\"Sign in\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col s2\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn-large  cyan darken-2 col s4\",onClick:registerHandler,disabled:loading},/*#__PURE__*/React.createElement(\"h6\",{style:{color:'black'}},\"Sign up\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col s1\"})))))));};","map":{"version":3,"sources":["/home/deathsmell/WebstormProjects/iAuthManager/client/src/pages/AuthPage.js"],"names":["React","useContext","useEffect","useState","useHttp","useMessage","AuthContext","AuthPage","auth","loading","error","request","clearError","email","password","form","setForm","message","changeHandler","event","target","name","value","registerHandler","data","loginHandler","login","token","id","color"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\nimport {useHttp} from \"../hooks/http.hook\";\nimport {useMessage} from \"../hooks/message.hook\";\nimport {AuthContext} from \"../context/AuthContext\";\nimport './AuthPage.css'\n\nexport const AuthPage = () => {\n    const auth = useContext(AuthContext);\n    const {loading, error, request, clearError} = useHttp();\n    const [form, setForm] = useState({\n        email: '',\n        password: '',\n    })\n\n    const message = useMessage()\n    useEffect(() => {\n        message(error)\n        clearError()\n    }, [error, message, clearError])\n\n    const changeHandler = event => {\n        setForm({...form, [event.target.name]: event.target.value})\n    }\n\n    const registerHandler = async () => {\n        const data = await request('/api/signup', 'POST', {...form})\n        message(data.message)\n    }\n\n\n    const loginHandler = async () => {\n        const data = await request('/api/login', 'POST', {...form})\n        if (data) {\n            auth.login(data.token, data.id)\n        } else {\n            // message(\"Not response\")\n        }\n    }\n\n    return (\n        <div className=\"col xl12 l12 m12 s12\">\n            <div className=\"row\">\n                <div className=\"col xl6 offset-xl3 l8 offset-l2 m8 offset-m2 s10 offset-s1\">\n                    <div className=\"row\">\n                        <div className=\"card cyan darken-4\">\n                            <div className=\"auth-panel card-content white-text hoverable \">\n                            <span className=\"card-title center-align\">\n                                <h5 className=\"auth-logo\">Authentication</h5></span>\n                                    <div className=\"row\">\n                                        <div className=\"input-field col s12\">\n                                            <input id=\"email\"\n                                                   type=\"email\"\n                                                   className=\"validate\"\n                                                   name=\"email\"\n                                                   onChange={changeHandler}\n                                            />\n                                            <label htmlFor=\"email\">Email</label>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"row\">\n                                        <div className=\"input-field col s12\">\n                                            <input id=\"password\"\n                                                   type=\"password\"\n                                                   className=\"validate\"\n                                                   name=\"password\"\n                                                   onChange={changeHandler}\n                                            />\n                                            <label htmlFor=\"password\">Password</label>\n                                        </div>\n                                    </div>\n\n                            </div>\n                            <div className=\"card-action row\">\n                                <div className=\"col s1\"/>\n                                <button className=\"btn-large  cyan darken-2 col s4\"\n                                        onClick={loginHandler}\n                                        disabled={loading}\n                                >\n                                    <h6 style={{color: 'black'}}>Sign in</h6>\n                                </button>\n                                <div className=\"col s2\"/>\n                                <button\n                                    className=\"btn-large  cyan darken-2 col s4\"\n                                    onClick={registerHandler}\n                                    disabled={loading}\n                                >\n                                    <h6 style={{color: 'black'}}>Sign up</h6>\n                                </button>\n                                <div className=\"col s1\"/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}