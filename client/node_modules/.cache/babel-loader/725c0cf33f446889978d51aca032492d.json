{"ast":null,"code":"import _regeneratorRuntime from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import{useSelect}from\"../../hooks/select.hook\";import{SelectContext}from\"../../context/SelectContext\";import useManage from\"../../hooks/manage.hook\";import\"./UserToolbar.css\";var isBlock=function isBlock(user){return user.status&&user.status===\"blocked\";};var UserToolbar=function UserToolbar(){var manager=useManage();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),blocked=_useState2[0],setBlocked=_useState2[1];var _useContext=useContext(SelectContext),_useContext2=_slicedToArray(_useContext,1),selectedUser=_useContext2[0];var _useSelect=useSelect(),cleanSelects=_useSelect.cleanSelects;var blockUsers=manager.blockUsers,deleteUsers=manager.deleteUsers,unblockUsers=manager.unblockUsers;useEffect(function(){if(selectedUser&&selectedUser.length)setBlocked(selectedUser.filter(isBlock).length);return function(){setBlocked(0);};},[selectedUser]);var selectDo=function selectDo(handler){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return cleanSelects();case 3:setBlocked(0);_context.next=6;return handler(selectedUser);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};return/*#__PURE__*/React.createElement(\"div\",{className:\"btn-group\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"card-action center\"},/*#__PURE__*/React.createElement(\"a\",{className:\"btn-large green \".concat(blocked?\" \":\"disabled\"),href:\"/\",onClick:selectDo(unblockUsers)},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons left\"},\"group_add\"),\"Unblock \",blocked>1?\" (\".concat(blocked,\")\"):\"\"),/*#__PURE__*/React.createElement(\"a\",{className:\"btn-large yellow darken-2 \".concat(selectedUser.length?\" \":\"disabled\"),href:\"/\",onClick:selectDo(blockUsers)},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons left\"},\"block\"),\"Block \",selectedUser.length!==blocked&&selectedUser.length>1?\" (\".concat(selectedUser.length-blocked,\")\"):\"\"),/*#__PURE__*/React.createElement(\"a\",{className:\"btn-large red lighten-1 \".concat(selectedUser.length?\" \":\"disabled\"),href:\"/\",onClick:selectDo(deleteUsers)},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons left\"},\"delete_forever\"),\"Delete \",selectedUser.length&&selectedUser.length>1?\" (\".concat(selectedUser.length,\")\"):\"\"),/*#__PURE__*/React.createElement(\"a\",{className:\"btn-large grey lighten-1 \".concat(selectedUser.length?\" \":\"disabled\"),href:\"/\",onClick:selectDo(cleanSelects)},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons left\"},\"clear_all\"),\"Clean \",selectedUser.length?\" (\".concat(selectedUser.length,\")\"):\"\"))));};export default UserToolbar;","map":{"version":3,"sources":["/home/deathsmell/WebstormProjects/iAuthManager/client/src/components/UserTable/UserToolbar.js"],"names":["React","useContext","useEffect","useState","useSelect","SelectContext","useManage","isBlock","user","status","UserToolbar","manager","blocked","setBlocked","selectedUser","cleanSelects","blockUsers","deleteUsers","unblockUsers","length","filter","selectDo","handler","e","preventDefault","concat"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\"\nimport {useSelect} from \"../../hooks/select.hook\";\nimport {SelectContext} from \"../../context/SelectContext\";\nimport useManage from \"../../hooks/manage.hook\";\nimport \"./UserToolbar.css\"\n\nconst isBlock = user => user.status && (user.status === \"blocked\")\n\nconst UserToolbar = () => {\n\n    const manager = useManage();\n    const [blocked, setBlocked] = useState(0)\n    const [selectedUser] = useContext(SelectContext)\n    const {cleanSelects} = useSelect()\n    const {blockUsers, deleteUsers, unblockUsers} = manager\n\n    useEffect(() => {\n        if (selectedUser && selectedUser.length)\n            setBlocked(selectedUser.filter(isBlock).length)\n        return () => {\n            setBlocked(0)\n        }\n    }, [selectedUser])\n\n\n    const selectDo = (handler) => {\n        return (async (e) => {\n            e.preventDefault()\n            await cleanSelects()\n            setBlocked(0)\n            await handler(selectedUser)\n        })\n    }\n\n    return (\n        <div className=\"btn-group\">\n            <div>\n                <div className=\"card-action center\">\n                    <a className={\"btn-large green \".concat(blocked ? \" \" : \"disabled\")}\n                       href=\"/\"\n                       onClick={selectDo(unblockUsers)}\n                    >\n                        <i className=\"material-icons left\">group_add</i>\n                        Unblock {blocked > 1\n                        ? ` (${blocked})`\n                        : \"\"}\n                    </a>\n                    <a className={\"btn-large yellow darken-2 \".concat(selectedUser.length ? \" \" : \"disabled\")}\n                       href=\"/\"\n                       onClick={selectDo(blockUsers)}\n                    >\n                        <i className=\"material-icons left\">block</i>\n                        Block {selectedUser.length !== blocked && selectedUser.length > 1\n                        ? ` (${selectedUser.length - blocked})`\n                        : \"\"}\n                    </a>\n                    <a className={\"btn-large red lighten-1 \".concat(selectedUser.length ? \" \" : \"disabled\")}\n                       href=\"/\"\n                       onClick={selectDo(deleteUsers)}\n                    >\n                        <i className=\"material-icons left\">delete_forever</i>\n                        Delete {selectedUser.length && selectedUser.length > 1\n                        ? ` (${selectedUser.length})`\n                        : \"\"}\n                    </a>\n                    <a className={\"btn-large grey lighten-1 \".concat(selectedUser.length ? \" \" : \"disabled\")}\n                       href=\"/\"\n                       onClick={selectDo(cleanSelects)}\n                    >\n                        <i className=\"material-icons left\">clear_all</i>\n                        Clean {selectedUser.length\n                        ? ` (${selectedUser.length})`\n                        : \"\"}\n                    </a>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default UserToolbar"]},"metadata":{},"sourceType":"module"}