{"ast":null,"code":"import _slicedToArray from\"/home/deathsmell/WebstormProjects/iAuthManager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useContext,useEffect}from'react';import{UserContext}from\"../context/UserContext\";import{SelectContext}from\"../context/SelectContext\";export var useSelect=function useSelect(){var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,1),users=_useContext2[0];var _useContext3=useContext(SelectContext),_useContext4=_slicedToArray(_useContext3,2),selectedUser=_useContext4[0],setSelectedUser=_useContext4[1];var setChecked=useCallback(function(boolean){return function(id){var elementById=document.getElementById(id.id?id.id:\"all\");if(elementById){elementById.checked=boolean;}};},[]);useEffect(function(){setChecked(users&&selectedUser.length===users.length)('all');},[selectedUser,users,setChecked]);var setCheckedAll=function setCheckedAll(boolean){var checked=setChecked(boolean);users.forEach(checked);};var cleanSelects=function cleanSelects(){setSelectedUser([]);setCheckedAll(false);};var selectAll=function selectAll(_ref){var target=_ref.target;if(target.checked){setSelectedUser([].concat(users));setCheckedAll(true);}else{cleanSelects();}};var selectRow=function selectRow(event){var target=event.target;var targetId=typeof target.value===\"string\"?Number(target.value):target.value;if(target&&target.checked){var changedUsers=users.filter(function(user){return user.id===targetId;});setSelectedUser(selectedUser.concat(changedUsers));}if(target&&!target.checked)setSelectedUser(selectedUser.filter(function(user){return user.id!==targetId;}));};return{selectedUser:selectedUser,selectAll:selectAll,selectRow:selectRow,cleanSelects:cleanSelects};};","map":{"version":3,"sources":["/home/deathsmell/WebstormProjects/iAuthManager/client/src/hooks/select.hook.js"],"names":["useCallback","useContext","useEffect","UserContext","SelectContext","useSelect","users","selectedUser","setSelectedUser","setChecked","boolean","id","elementById","document","getElementById","checked","length","setCheckedAll","forEach","cleanSelects","selectAll","target","concat","selectRow","event","targetId","value","Number","changedUsers","filter","user"],"mappings":"wIAAA,OAAQA,WAAR,CAAqBC,UAArB,CAAiCC,SAAjC,KAAiD,OAAjD,CACA,OAAQC,WAAR,KAA0B,wBAA1B,CACA,OAAQC,aAAR,KAA4B,0BAA5B,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,iBACXJ,UAAU,CAACE,WAAD,CADC,4CACpBG,KADoB,kCAEaL,UAAU,CAACG,aAAD,CAFvB,6CAEpBG,YAFoB,iBAENC,eAFM,iBAM3B,GAAMC,CAAAA,UAAU,CAAGT,WAAW,CAAC,SAACU,OAAD,CAAa,CACxC,MAAO,UAACC,EAAD,CAAQ,CACX,GAAMC,CAAAA,WAAW,CAAGC,QAAQ,CAACC,cAAT,CAAwBH,EAAE,CAACA,EAAH,CAAQA,EAAE,CAACA,EAAX,CAAgB,KAAxC,CAApB,CACA,GAAIC,WAAJ,CAAiB,CACbA,WAAW,CAACG,OAAZ,CAAsBL,OAAtB,CACH,CACJ,CALD,CAMH,CAP6B,CAO3B,EAP2B,CAA9B,CASAR,SAAS,CAAC,UAAM,CACZO,UAAU,CAACH,KAAK,EAAKC,YAAY,CAACS,MAAb,GAAwBV,KAAK,CAACU,MAAzC,CAAV,CAA4D,KAA5D,EACH,CAFQ,CAEN,CAACT,YAAD,CAAeD,KAAf,CAAsBG,UAAtB,CAFM,CAAT,CAIA,GAAMQ,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACP,OAAD,CAAa,CAC/B,GAAMK,CAAAA,OAAO,CAAGN,UAAU,CAACC,OAAD,CAA1B,CACAJ,KAAK,CAACY,OAAN,CAAcH,OAAd,EACH,CAHD,CAKA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBX,eAAe,CAAC,EAAD,CAAf,CACAS,aAAa,CAAC,KAAD,CAAb,CACH,CAHD,CAKA,GAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAc,IAAZC,CAAAA,MAAY,MAAZA,MAAY,CAC5B,GAAIA,MAAM,CAACN,OAAX,CAAoB,CAChBP,eAAe,CAAC,GAAGc,MAAH,CAAUhB,KAAV,CAAD,CAAf,CACAW,aAAa,CAAC,IAAD,CAAb,CACH,CAHD,IAGO,CACHE,YAAY,GACf,CACJ,CAPD,CASA,GAAMI,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,CACzB,GAAMH,CAAAA,MAAM,CAAGG,KAAK,CAACH,MAArB,CACA,GAAMI,CAAAA,QAAQ,CAAG,MAAOJ,CAAAA,MAAM,CAACK,KAAd,GAAwB,QAAxB,CACXC,MAAM,CAACN,MAAM,CAACK,KAAR,CADK,CAEXL,MAAM,CAACK,KAFb,CAGA,GAAIL,MAAM,EAAIA,MAAM,CAACN,OAArB,CAA8B,CAC1B,GAAMa,CAAAA,YAAY,CAAGtB,KAAK,CAACuB,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACnB,EAAL,GAAYc,QAAhB,EAAjB,CAArB,CACAjB,eAAe,CAACD,YAAY,CAACe,MAAb,CAAoBM,YAApB,CAAD,CAAf,CACH,CACD,GAAIP,MAAM,EAAI,CAACA,MAAM,CAACN,OAAtB,CACIP,eAAe,CAACD,YAAY,CAACsB,MAAb,CAAoB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACnB,EAAL,GAAYc,QAAhB,EAAxB,CAAD,CAAf,CACP,CAXD,CAaA,MAAO,CAAClB,YAAY,CAAZA,YAAD,CAAea,SAAS,CAATA,SAAf,CAA0BG,SAAS,CAATA,SAA1B,CAAqCJ,YAAY,CAAZA,YAArC,CAAP,CACH,CApDM","sourcesContent":["import {useCallback, useContext, useEffect} from 'react'\nimport {UserContext} from \"../context/UserContext\";\nimport {SelectContext} from \"../context/SelectContext\";\n\nexport const useSelect = () => {\n    const [users] = useContext(UserContext)\n    const [selectedUser, setSelectedUser] = useContext(SelectContext)\n\n\n\n    const setChecked = useCallback((boolean) => {\n        return (id) => {\n            const elementById = document.getElementById(id.id ? id.id : \"all\");\n            if (elementById) {\n                elementById.checked = boolean\n            }\n        }\n    }, [])\n\n    useEffect(() => {\n        setChecked(users && (selectedUser.length === users.length))('all')\n    }, [selectedUser, users, setChecked])\n\n    const setCheckedAll = (boolean) => {\n        const checked = setChecked(boolean);\n        users.forEach(checked)\n    }\n\n    const cleanSelects = () => {\n        setSelectedUser([])\n        setCheckedAll(false)\n    }\n\n    const selectAll = ({target}) => {\n        if (target.checked) {\n            setSelectedUser([].concat(users))\n            setCheckedAll(true)\n        } else {\n            cleanSelects()\n        }\n    }\n\n    const selectRow = (event) => {\n        const target = event.target\n        const targetId = typeof target.value === \"string\"\n            ? Number(target.value)\n            : target.value\n        if (target && target.checked) {\n            const changedUsers = users.filter(user => user.id === targetId);\n            setSelectedUser(selectedUser.concat(changedUsers))\n        }\n        if (target && !target.checked)\n            setSelectedUser(selectedUser.filter(user => user.id !== targetId))\n    }\n\n    return {selectedUser, selectAll, selectRow, cleanSelects}\n}"]},"metadata":{},"sourceType":"module"}