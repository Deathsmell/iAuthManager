(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t){e.exports.noop=function(){}},17:function(e,t,a){},23:function(e,t,a){e.exports=a(39)},28:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),l=a.n(r),o=(a(17),a(11)),s=a(2),u=a(1),i=Object(n.createContext)([]),m=Object(n.createContext)({}),f=function(){var e=Object(n.useContext)(i),t=Object(u.a)(e,1)[0],a=Object(n.useContext)(m),c=Object(u.a)(a,2),r=c[0],l=c[1],o=Object(n.useCallback)((function(e){return function(t){var a=document.getElementById(t.id?t.id:"all");a&&(a.checked=e)}}),[]);Object(n.useEffect)((function(){o(t&&r.length===t.length)("all")}),[r,t,o]);var s=function(e){var a=o(e);t.forEach(a)},f=function(){l([]),s(!1)};return{selectedUser:r,selectAll:function(e){e.target.checked?(l([].concat(t)),s(!0)):f()},selectRow:function(e){var a=e.target,n="string"===typeof a.value?Number(a.value):a.value;if(a&&a.checked){var c=t.filter((function(e){return e.id===n}));l(r.concat(c))}a&&!a.checked&&l(r.filter((function(e){return e.id!==n})))},cleanSelects:f}},d=(a(28),a(21)),b=a.n(d),h=function(e){var t=e.user,a=Object(n.useCallback)((function(e){return b()(e).format("hh:mm:ss MM-DD-YY")}),[]),r=Object(n.useCallback)((function(e,t){return"createdAt"===e?a(t):"status"===e?c.a.createElement("div",{style:{fontSize:"20px"},className:"chip ".concat("blocked"===t?"red":"green")},t):t}),[t,a]);return Object.entries(t).map((function(e,t){var a=Object(u.a)(e,2),n=a[0],l=a[1];return c.a.createElement("td",{className:l,key:"".concat(l,"-").concat(t,"-").concat(l)},r(n,l))}))},p=function(){var e=f(),t=e.selectRow,a=e.selectAll,r=Object(n.useContext)(i),l=Object(u.a)(r,1)[0];return c.a.createElement("div",{className:""},l.length&&c.a.createElement("table",{className:"highlight"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{className:"checkbox-collum"},c.a.createElement("label",{htmlFor:"all"},c.a.createElement("input",{type:"checkbox",className:"filled-in checkbox-pink",id:"all",key:"all",onClick:a}),c.a.createElement("span",{className:"empty"}))),Object.keys(l[0]).map((function(e){return c.a.createElement("th",{key:e},e)})))),c.a.createElement("tbody",null,l.map((function(e){return c.a.createElement("tr",{id:"user-tr-".concat(e.id),key:"user-tr-".concat(e.id)},c.a.createElement("td",{className:"checkbox-collum"},c.a.createElement("label",{htmlFor:e.id},c.a.createElement("input",{type:"checkbox",className:"filled-in checkbox-pink",id:e.id,value:e.id,onClick:t}),c.a.createElement("span",{className:"empty"}))),c.a.createElement(h,{user:e}))})))))},v=a(3),E=a.n(v),g=a(5),k=function(){return Object(n.useCallback)((function(e){window.M&&e&&"null"!==e&&(e.message?O(e.message):"string"!==typeof e?e.forEach((function(e){O(e)})):O(e))}),[])},O=function(e){window.M.toast({html:e})},j=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),l=Object(u.a)(r,2),o=l[0],s=l[1];return{loading:a,error:o,request:Object(n.useCallback)(function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n,r,l,o,u,i=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,r=i.length>3&&void 0!==i[3]?i[3]:{},c(!0),e.prev=4,n&&(n=JSON.stringify(n),r["Content-Type"]="application/json"),e.next=8,fetch(t,{method:a,body:n,headers:r});case 8:return l=e.sent,e.prev=9,e.next=12,l.json();case 12:o=e.sent,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),u=o.message?o.message:"Unsupported json",s(u);case 19:return l.ok||s(o.message||{message:"useHttp response error"}),c(!1),e.abrupt("return",o);case 24:throw e.prev=24,e.t1=e.catch(4),c(!1),e.t1;case 28:case"end":return e.stop()}}),e,null,[[4,24],[9,15]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:Object(n.useCallback)((function(){return s(null)}),[])}},N=a(12),w=a.n(N),x=Object(n.createContext)({token:null,userId:null,login:w.a,logout:w.a,isAuthenticated:!1}),y=function(){var e=j().request,t=k(),a=Object(n.useState)(!1),c=Object(u.a)(a,2),r=c[0],l=c[1],o=Object(n.useContext)(x).token,s=Object(n.useContext)(i),m=Object(u.a)(s,2)[1],f=Object(n.useCallback)((function(t){return e("api/users","GET",null,{Authorization:"Bearer ".concat(o)}).then(t).catch((function(){return t([])}))}),[e,o]);Object(n.useEffect)((function(){o&&m(f(m))}),[o,r,m,f]);var d=function(){var a=Object(g.a)(E.a.mark((function a(n,c){var s;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!c||!o){a.next=8;break}return a.next=3,e("api/".concat(n),"POST",{users:c},{Authorization:"Bearer ".concat(o)});case 3:(s=a.sent)&&t(s),l(!r),a.next=9;break;case 8:t("Incorrect token");case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}();return{blockUsers:function(){var e=Object(g.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("block",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),unblockUsers:function(){var e=Object(g.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("unblock",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUsers:function(){var e=Object(g.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("delete",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUsers:f}},C=(a(31),function(e){return e.status&&"blocked"===e.status}),S=function(){var e=y(),t=Object(n.useState)(0),a=Object(u.a)(t,2),r=a[0],l=a[1],o=Object(n.useContext)(m),s=Object(u.a)(o,1)[0],i=f().cleanSelects,d=e.blockUsers,b=e.deleteUsers,h=e.unblockUsers;Object(n.useEffect)((function(){return s&&s.length&&l(s.filter(C).length),function(){l(0)}}),[s]);var p=function(e){return function(){var t=Object(g.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,i();case 3:return l(0),t.next=6,e(s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return c.a.createElement("div",{className:"btn-group"},c.a.createElement("div",null,c.a.createElement("div",{className:"card-action center"},c.a.createElement("a",{className:"btn-large green ".concat(r?" ":"disabled"),href:"/",onClick:p(h)},c.a.createElement("i",{className:"material-icons left"},"group_add"),"Unblock ",r>1?" (".concat(r,")"):""),c.a.createElement("a",{className:"btn-large yellow darken-2 ".concat(s.length?" ":"disabled"),href:"/",onClick:p(d)},c.a.createElement("i",{className:"material-icons left"},"block"),"Block ",s.length!==r&&s.length>1?" (".concat(s.length-r,")"):""),c.a.createElement("a",{className:"btn-large red lighten-1 ".concat(s.length?" ":"disabled"),href:"/",onClick:p(b)},c.a.createElement("i",{className:"material-icons left"},"delete_forever"),"Delete ",s.length&&s.length>1?" (".concat(s.length,")"):""),c.a.createElement("a",{className:"btn-large grey lighten-1 ".concat(s.length?" ":"disabled"),href:"/",onClick:p(i)},c.a.createElement("i",{className:"material-icons left"},"clear_all"),"Clean ",s.length?" (".concat(s.length,")"):""))))},I=function(){var e=Object(n.useState)([]),t=Object(n.useState)([]);return c.a.createElement("div",null,c.a.createElement(i.Provider,{value:t},c.a.createElement(m.Provider,{value:e},c.a.createElement(S,null),c.a.createElement(p,null))))},A=a(8),U=a(9),P=(a(32),function(){var e=Object(n.useContext)(x),t=j(),a=t.loading,r=t.error,l=t.request,o=t.clearError,s=Object(n.useState)({email:"",password:""}),i=Object(u.a)(s,2),m=i[0],f=i[1],d=k();Object(n.useEffect)((function(){d(r),o()}),[r,d,o]);var b=function(e){f(Object(U.a)({},m,Object(A.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(g.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/signup","POST",Object(U.a)({},m));case 2:t=e.sent,d(t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var t=Object(g.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l("/api/login","POST",Object(U.a)({},m));case 2:(a=t.sent)&&e.login(a.token,a.id);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"col xl12 l12 m12 s12"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col xl6 offset-xl3 l8 offset-l2 m8 offset-m2 s10 offset-s1"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"card cyan darken-4"},c.a.createElement("div",{className:"auth-panel card-content white-text hoverable "},c.a.createElement("span",{className:"card-title center-align"},c.a.createElement("h5",{className:"auth-logo"},"Authentication")),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field col s12"},c.a.createElement("input",{id:"email",type:"email",className:"validate",name:"email",onChange:b}),c.a.createElement("label",{htmlFor:"email"},"Email"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field col s12"},c.a.createElement("input",{id:"password",type:"password",className:"validate",name:"password",onChange:b}),c.a.createElement("label",{htmlFor:"password"},"Password")))),c.a.createElement("div",{className:"card-action row"},c.a.createElement("div",{className:"col s1"}),c.a.createElement("button",{className:"btn-large  cyan darken-2 col s4",onClick:p,disabled:a},c.a.createElement("h6",{style:{color:"black"}},"Sign in")),c.a.createElement("div",{className:"col s2"}),c.a.createElement("button",{className:"btn-large  cyan darken-2 col s4",onClick:h,disabled:a},c.a.createElement("h6",{style:{color:"black"}},"Sign up")),c.a.createElement("div",{className:"col s1"})))))))}),T=(a(37),function(){var e=Object(n.useContext)(x).logout;return c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper cyan darken-4"},c.a.createElement("span",{className:"brand-logo logo white-text lighten-1"},c.a.createElement("i",{className:"material-icons icon-color"},"cloud"),"Auth manger"),c.a.createElement("ul",{className:"right hide-on-med-and-down"},c.a.createElement("li",null,c.a.createElement("a",{className:"logout-btn",href:"/",onClick:e},c.a.createElement("i",{className:"material-icons center icon-color lighten-1"},"exit_to_app"))))))});a(38);var B=function(){var e=function(){var e=j().request,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),o=Object(u.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(!1),f=Object(u.a)(m,2),d=f[0],b=f[1];Object(n.useEffect)((function(){!d&&c&&e("api/auth","POST",null,{Authorization:"Bearer ".concat(c)}).then((function(e){e.isAuthenticated?b(!0):localStorage.removeItem("token")})).catch(console.error)}),[d,c,e]);var h=Object(n.useCallback)((function(e,t){r(e),i(t),localStorage.setItem("userId",t),localStorage.setItem("token",e)}),[]),p=Object(n.useCallback)((function(){console.log("I remove TOKEN"),r(null),i(null),localStorage.removeItem("token"),localStorage.removeItem("userId")}),[]);return Object(n.useEffect)((function(){var e=localStorage.getItem("token"),t=localStorage.getItem("userId");c||h(e,t)}),[h,c,s]),{token:c,userId:s,login:h,logout:p,isAuthenticated:d}}(),t=e.token,a=e.login,r=e.userId,l=e.logout,i=e.isAuthenticated,m=function(e){return e?c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/list",exact:!0},c.a.createElement(I,null)),c.a.createElement(s.a,{path:"*"},c.a.createElement(I,null))):c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"*"},c.a.createElement(P,null)))}(i);return c.a.createElement(x.Provider,{value:{token:t,logout:l,login:a,userId:r,isAuthenticated:i}},c.a.createElement(o.a,null,c.a.createElement("div",{className:"fullscreen cyan lighten-5 row"},i&&c.a.createElement(T,null),m)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.4052bfa8.chunk.js.map